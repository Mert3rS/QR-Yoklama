<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>👥 Kullanıcı Listesi</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='kullanicilar.css') }}">
</head>
<body>
    <h1>👥 Kayıtlı Kullanıcılar</h1>

    <a href="{{ url_for('dashboard') }}" class="button">🔙 Geri Dön</a>

    <div style="text-align: right; margin-bottom: 10px;">
        <form action="{{ url_for('kullanicilar_sil_tumu') }}" method="POST" onsubmit="return confirm('Tüm kullanıcıları silmek istediğine emin misin?');" style="display:inline;">
            <button type="submit" class="delete-btn1">Hepsini Sil</button>
        </form>
    </div>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Okul Numarası</th>
                <th>Ad Soyad</th>
                <th>Geldi/Gelmedi</th> <!-- Yeni başlık eklendi -->
                <th>İşlem</th>
            </tr>
        </thead>
        <tbody>
            {% for k in kullanicilar %}
            <tr>
                <td>{{ k['id'] }}</td>
                <td>{{ k['student_number'] }}</td>
                <td>{{ k['name'] }}</td>
                
                <!-- Yoklama durumu -->
                <td class="attendance-status">
                    {% if k.attendance %}
                        <span class="status success">✔️</span>
                    {% else %}
                        <span class="status fail">❌</span>
                    {% endif %}
                </td>

                <!-- Sil butonu -->
                <td>
                    <form action="{{ url_for('kullanici_sil', id=k['id']) }}" method="POST" style="display:inline;">
                        <button type="submit" class="delete-btn" onclick="return confirm('Silmek istediğine emin misin?')">Sil</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

<button onclick="scrollToTop()" id="scrollTopBtn" title="Yukarı çık">⬆️  </button>
<script>
    // Buton elementi
    const scrollTopBtn = document.getElementById("scrollTopBtn");

    // Sayfa kaydıkça butonu göster/gizle
    window.onscroll = function() {
        if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
            scrollTopBtn.style.display = "block";
        } else {
            scrollTopBtn.style.display = "none";
        }
    };

    // Yukarı kaydırma işlemi
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        });
    }
</script>

</body>
</html>
